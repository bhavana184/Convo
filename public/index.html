<!DOCTYPE html>
<html lang="en" ng-app="myApp" >
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
			integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="css/style.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>

		<title>ChatCord App</title>
	</head>
	<body ng-controller="chatctrl" ng-init="showFront=true;showChat=false" >
		<!-- front page starts -->
		<div class="join-container"  ng-if="showFront">
			<header class="join-header">
				<h1><i class="fas fa-smile"></i> ChatCord</h1>
			</header>
			<main class="join-main">
				<!-- <form action="chat.html"> -->
				<form ng-submit="startChat($event)">
					<div class="form-control">
						<label for="username">Username</label>
						<input
							type="text"
							name="username"
							id="username"
							placeholder="Enter your username"
							required
							ng-model="user.name"
						/>
					</div>
					<div class="form-control">
						<label for="room">Room</label>
						<input type="text" name="room" id="room"
										placeholder="Enter your room name" required
										ng-model="user.room"  />
						<!-- <select name="room" id="room" ng-init="user.room">
							<option value="JavaScript">JavaScript</option>
							<option value="Python">Python</option>
							<option value="PHP">PHP</option>
							<option value="C#">C#</option>
							<option value="Ruby">Ruby</option>
							<option value="Java">Java</option>
						</select> -->
					</div>
					<button type="submit" class="btn" >Join Chat</button>
					<!-- <button type="submit" class="btn" ng-click="startChat()"  >Join Chat</button> -->

				</form>
			</main>
		</div>
		<!-- front page ends -->
		<!-- chat box display  starts-->
		<div class="chat-container" ng-if="showChat" ng-cloak>
			<!-- ng-cloak used to stop flickering effect -->
	    <header class="chat-header">
	      <h1><i class="fas fa-smile"></i> ChatCord</h1>
	      <!-- <a href="index.html" class="btn">Leave Room</a> -->
				<a class="btn" ng-click="leaveRoom()">Leave Room</a>

	    </header>
	    <main class="chat-main">
	      <div class="chat-sidebar">
	        <h3><i class="fas fa-comments"></i> Room Name:</h3>
	        <h2 id="room-name" ng-bind="user.room"></h2>
	        <h3><i class="fas fa-users"></i> Users</h3>
	        <ul id="users" >
						<li ng-repeat='x in userlist.users'>{{ x.username }}</li>
	          <!-- <li>Brad</li>
	          <li>John</li>
	          <li>Mary</li>
	          <li>Paul</li>
	          <li>Mike</li> -->
	        </ul>
	      </div>
	      <div class="chat-messages" ng-init="chat_messages">
						<!-- <div class="message">
							<p class="meta">Brad <span>9:12pm</span></p>
							<p class="text">
								Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi,
								repudiandae.
							</p>
						</div>
						<div class="message">
							<p class="meta">Mary <span>9:15pm</span></p>
							<p class="text">
								Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi,
								repudiandae.
							</p>
						</div> -->
	      </div>
	    </main>
	    <div class="chat-form-container">
	      <form id="chat-form" ng-submit="sendMessage($event)">
	        <input
	          id="msg"
	          type="text"
	          placeholder="Enter Message"
	          required
	          autocomplete="off"
						ng-model="user.msg"
						ng-focus="focus=true"
	        />
	        <button class="btn" ><i class="fas fa-paper-plane"></i> Send</button>
	      </form>
	    </div>
	  </div>
		<!-- chat box display ends -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.9.6/qs.min.js"
	  integrity="sha512-3TmPrquYLaAsUmZKXRARTDC5siWhLAdBVqNo4dWpDABBtLU62AaoTaQJEvjxjExcZYurO6i1dnK85k8pPIBlRg=="
	  crossorigin="anonymous">
	  </script>
	  <script src="/socket.io/socket.io.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>
